<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8"/>
        <title></title>
        <style>
            .dragable {
                width: 100px;
                height: 100px;
                position: absolute;
            }
            #red {
                background-color: red;
            }
            #green {
                background: darkgreen;
            }
        </style>
    </head>
    <body>
        <div id="red" class="dragable"></div>
        <div id="green" class="dragable"></div>
        <script type="text/javascript">
            var dragableDiv = {};

            dragableDiv.el = document.getElementById('red');

            dragableDiv.startMove = function () {

                dragableDiv.el.onmousedown = function (e) {

                    var evt = e || window.event;
                    dragableDiv.downX = evt.clientX;
                    dragableDiv.downY = evt.clientY;
                    dragableDiv.downTop = dragableDiv.el.offsetTop;
                    dragableDiv.downLeft = dragableDiv.el.offsetLeft;

                   document.onmousemove = function (e) {
                        var evt = e || window.event;
                        dragableDiv.moving(evt.clientX, evt.clientY);
                    }

                    document.onmouseup = function (e) {
                        dragableDiv.stopMove();
                    }
                }
            }

            dragableDiv.moving = function (x, y) {
                var diffX = x - dragableDiv.downX;
                var diffY = y - dragableDiv.downY;

                dragableDiv.el.style.top = dragableDiv.downTop + diffY + 'px';
                dragableDiv.el.style.left = dragableDiv.downLeft + diffX + 'px';
            }

            dragableDiv.stopMove = function () {
                document.onmousemove = null;
            }

            dragableDiv.startMove();


            var dragableGreenDiv = {};

            dragableGreenDiv.el = document.getElementById('green');

            dragableGreenDiv.startMove = function () {
                var self = this;
                this.el.onmousedown = function (e) {
                    console.log(this);
                    var evt = e || window.event;
                    self.downX = evt.clientX;
                    self.downY = evt.clientY;
                    self.downTop = self.el.offsetTop;
                    self.downLeft = self.el.offsetLeft;

                    document.onmousemove = function (e) {
                        var evt = e || window.event;
                        self.moving(evt.clientX, evt.clientY);
                    }

                    document.onmouseup = function (e) {
                        self.stopMove();
                    }
                }
            }

            dragableGreenDiv.moving = function (x, y) {
                var diffX = x - this.downX;
                var diffY = y - this.downY;

                this.el.style.top = this.downTop + diffY + 'px';
                this.el.style.left = this.downLeft + diffX + 'px';
            }

            dragableGreenDiv.stopMove = function () {
                document.onmousemove = null;
            }

            dragableGreenDiv.startMove();
        </script>
    </body>
</html>