<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Event Delegate</title>
        <style>
            li {
                border: #cc0033 solid 1px;
                width: 200px;
                cursor: pointer;
                margin: 3px;
                list-style: none;
            }

            ul {
                border: #2a523c solid 1px;
                padding: 10px;
                width: 300px;
                margin: 10px;
            }

            .over {
                background: #66ff66;
            }
        </style>
    </head>
    <body>
        <input type="button" id="add-item" value="添加一个li"/>
        <ul>
            <li>我是li：第1行</li>
            <li>我是li：第2行</li>
            <li>我是li：第3行</li>
            <li>我是li：第4行</li>
        </ul>
        <script src="../vendor/jquery-1.12.1.js"></script>
        <script>

            /*
             * INFO:事件委托/事件代理
             * 即利用事件冒泡的原理，通过在父元素上绑定事件处理程序，
             * 从而统一的处理其子元素的相同事件
             * 优点：
             * 1. 子元素非常多时，可以避免在每个子元素上都绑定事件处理程序，从而节省系统资源
             * 2. 子元素频繁的增加/删除时，无需为每个新添加的元素重新添加事件处理程序。
             */

            //TODO: 绑定所有li的mouseover, mouseout事件
//            $('li').on('mouseover', function (evt) {
//                $(this).addClass('over');
//            });
//            $('li').on('mouseout', function (evt) {
//                $(this).removeClass('over');
//            });
            $('#add-item').on('click', function () {
                var count = $('li').length;
                $('<li>我是li：第' + (count + 1) + '行</li>').appendTo('ul');
            });

            //INFO: 事件代理 - 方式1
//            $('ul').on('mouseover', function (evt) {
//                //this指向ul
//                if (evt.target.tagName.toLowerCase() === 'li') {
//                    $(evt.target).addClass('over');
//                }
//            });
//
//            $('ul').on('mouseout', function (evt) {
//                if (evt.target.tagName.toLowerCase() === 'li') {
//                    $(evt.target).removeClass('over');
//                }
//            });

            //INFO: 事件代理 - 方式2
            $('ul').on('mouseover', 'li', function () {
                //this指向li
                $(this).addClass('over');
            });

            $('ul').on('mouseout', 'li', function () {
                $(this).removeClass('over');
            });
        </script>
    </body>
</html>