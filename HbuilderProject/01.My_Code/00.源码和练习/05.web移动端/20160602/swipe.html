<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<style>
		
		@keyframes moveFromTop{
			from {transform : translateY(-100%)}
		}
		
		@keyframes moveFromBottom{
			from {transform : translateY(100%)}
		}

		@keyframes moveTopFromViewport{
			form {}
			to {transform : translateY(-100%)}
		}

		@keyframes moveBottomFromViewport{
			form {}
			to {transform : translateY(100%)}
		}

		html,body{height: 100%;}
		body{margin:auto;overflow: hidden;color:#fff;font-size: 100px}
		section{
			position: relative;
			height: 100%;
			width: 100%;
		}

		.wrap{
			position: absolute;
			height: 100%;
			width: 100%;
			animation-duration : 0.5s;
			animation-fill-mode : forwards;
			animation-timing-function : linear;
		}


		.wrap-item-1{
			background: red;
			animation-name : moveFromTop;
		}
		.wrap-item-2{
			background: green;
		}
		.wrap-item-3{
			background: blue;
		}
		.wrap-item-4{
			background: yellow;
		}
		.wrap-item-5{
			background: pink;
		}

		.hide{
			display: none;
		}



	</style>
</head>
<body>
	<section>
		<div class="wrap wrap-item-1">page1 start</div>
		<div class="wrap wrap-item-2 hide">page2</div>
		<div class="wrap wrap-item-3 hide">page3</div>
		<div class="wrap wrap-item-4 hide">page4</div>
		<div class="wrap wrap-item-5 hide">page5   end  </div>
	</section>
	<script src="pubsub.js"></script>
	<script src="swipe.js"></script>
	<script>
		var curPageNum  = 0 ;
		var wraps = document.querySelectorAll(".wrap");
		var topHandler = function(e){
			if(curPageNum>=4)return false;
			wraps[curPageNum].style.animationName = "moveTopFromViewport";
			curPageNum = ++curPageNum ;
			wraps[curPageNum].className = wraps[curPageNum].className.replace(/\s*hide/," ");
			wraps[curPageNum].style.animationName = "moveFromBottom";
		};
		var bottomHandler = function(e){
			if(curPageNum<=0)return false;
			wraps[curPageNum].style.animationName = "moveBottomFromViewport";
			curPageNum = --curPageNum ;
			wraps[curPageNum].className = wraps[curPageNum].className.replace(/\s*hide/," ");
			wraps[curPageNum].style.animationName = "moveFromTop";
		};
		

		[].forEach.call(wraps,function(item,index){
			Swipe.swipetop(item,topHandler);
			Swipe.swipebottom(item,bottomHandler);
		});


	</script>
</body>
</html>