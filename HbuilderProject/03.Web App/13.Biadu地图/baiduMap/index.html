<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>商户列表</title>
		<meta name="viewport" content="width=device-width,initial-scale=1.0, user-scalable=no" />
		<style>
			*{padding: 0;margin: 0;}
			.cxt{
				width:100%;
				min-height:10rem;
				overflow: hidden;
				background-color: #fafafa;
			}
			.list{
				width:100%;
				height: 3rem;
				text-align: center;
				font-size: 20px;
				color: red;
				line-height:3rem;
				border-bottom: 1px solid #acacac;
			}
		</style>
	</head>
	<body>
		<div class="cxt">
			<div class="list">
				<span>商品图片<img/></span>
				<span>商品名称</span>
				<span>位置<span></span></span>
			</div>
			<div class="list">
				<span>商品图片<img/></span>
				<span>商品名称</span>
				<span>位置<span></span></span>
			</div>
			<div class="list">
				<span>商品图片<img/></span>
				<span>商品名称</span>
				<span>位置<span></span></span>
			</div>
		</div>
	</body>
	<script type="text/javascript">
	   //1.商户列表 商户图片
	   //2.联系方式
	   //3.位置图标
	   //模拟的店面json信息 等价在后端得到
	   var vender={
	   	total:"3",data:[
	   	   {img:"lo.png",name:"6001",location:[113.951697,22.540329]},
	   	   {img:"lo.png",name:"6002",location:[112.951697,22.540329]},
	   	   {img:"lo.png",name:"6003",location:[111.951697,22.540329]},
	   	   {img:"lo.png",name:"6004",location:[110.951697,22.540329]}
	   	   ]
	   };
	   document.getElementsByClassName("cxt")[0].innerHTML="";
	   var result=vender.data;//得到json array
	   var str='';
	   for(var i=0;i<result.length;i++){
	   	  str+='<div class="list">'+
				'<span>'+result[i].img+'</span>'+
				'<span>'+result[i].name+'</span>'+
				'<span ontouchstart="getLocation(event);"  title="'+result[i].location[0]+","+result[i].location[1]+'">位置<span></span></span>'+
			'</div>';
	   }
	    document.getElementsByClassName("cxt")[0].innerHTML=str;
	    
	    function getLocation(event){
	    	//1.得到在页面中位置数据信息 x y
	    	var _loc=event.target.getAttribute("title");
	    	var _gloc=_loc.split(",");
	    	console.log(_gloc);
	    	//2.打开新页面 并把得到x y传递过去
	    	window.location.href="map.html?x="+_gloc[0]+"&y="+_gloc[1];
	    	//3.问题:另外页面可以得到吗？
	    }
	    
	    //总结:
	    //1.做的只是数据显示------商家信息存储在后端  放在隐藏域里面 title,name,source data-
	    //2.生成列表绑定事件(主要就是将我们显示在隐藏域里面的数据取出来),页面传值发送给地图显示页面 window.location.href="page.html?a=1&b=2"
	    //3.地图显示页面 window.locaton.search获取地址栏页面后面跟的全部数据,解析,交给百度地图api
	    
	    //1.高德地图 ----demo 练习
	    
	    
	   
    </script>

</html>
