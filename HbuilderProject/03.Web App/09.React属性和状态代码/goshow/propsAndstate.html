<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Props&State的混搭使用</title>
		<script>
			//主要用于解决----实现类似走秀网中的数据列表
			//1.一个是父组件 主要是走秀网数据列表的容器
			//2.一个是子组件 作用 接收父组建传入的数据 并自我解析
			//合理解决方案:就是通过父组件得到变化的数据(存在state里面),在把这些数据当作属性传递给子组件
			
			
		</script>
		<script type="text/javascript" src="lib/react.min.js" ></script>
		<script type="text/javascript" src="lib/react-dom.min.js" ></script>
		<script type="text/javascript" src="lib/browser.min.js" ></script>
	</head>
	<body>
	</body>
	<script type="text/babel">
	    //需求:主要在父组建中 改变父组件中文本框的值,改变后，文本框的值也同步更新到子组件
	       //思路1.在父组件中设定默认 state,用于存储文本框变化的值
	       //思路2.给文本框加可以获取值事件,把值存到state中
	       //思路3.得到的state值作为属性传递给子组件(功能专门去解析数据),让子组件自我解析
	       //
		//1.创建父组件
		var MyComp=React.createClass({
			getInitialState:function(){
				return{
					_text:'',
					_value:'',
					_array:[]
				};
			},
			handleChange:function(event){
				var _value=event.target.value;//得到文本框值
				this.setState({_text:_value});
			},
			render:function(){
				return(
					<div>
						  {this.state._value}
						  <input onChange={this.handleChange} type="text"/>
						  <SonComp name={this.state._text}/>
					</div>
				);
			}
		});
		//2.创建子组件
		var SonComp=React.createClass({
			 //1.没有props时候不执行
				componentWillReceiveProps: function(nextProps){
					console.log("1.nextProps");
				},
				//2.给开发一个权限 设置组件在接到新props,state以后是否发生更新---写入逻辑 控制数据更新,节省组件性能
				shouldComponentUpdate:function(nextProps,nextState){
					//console.log("&&&&&&"+nextState._text);
					//if(nextState._text=="WUQIANG"){
						return true;
					//}else{
					//	return false;
					//}
					
				},
				componentWillUpdate:function(nextProps,nextState){
					//这个函数使用很少 主要日志，记录打印
					console.log("2.will update 组件即将渲染");
				},
				componentDidUpdate:function(){
					console.log("4.did update 更新结束");
				}
			,
			render:function(){
				console.log("child comp render again");
				var styles={color:"red"}
				return(
					<div>
					    this is son comp!
					   <span style={styles}>{this.props.name}</span>
					</div>
				);
			}
		});
		ReactDOM.render(<MyComp/>,document.body);
		//react 运行中生命周期函数
		
		//1.组件改变自身state时候
		
		//2.父组件改变了子组件的属性----父组件改变了自身state,作为属性传递给子组件,父组件内部也运行了生命周期函数
		//,子组件也运行了生命周期函数
		
	</script>
	
</html>
