<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title></title>
    <script type="text/javascript">
    	
   		document.addEventListener('plusready', function(){
   			//console.log("所有plus api都应该在此事件发生后调用，否则会出现plus is undefined。"
   			
   		});
   		//拍照的功能以及实现了
   		function pictureImg(){
   			//dcloud 将所有可以操作原生手机的api 都封装在了plus对象里面
   			
   			var _carema=plus.camera.getCamera();//获取摄像头管理对象
   			_carema.captureImage(function(path){
   				 var io=plus.io;//文件系统---dcloud给我们提供可以操作手机上面文件的api方法
   				 alert("get image success&&"+io.convertLocalFileSystemURL(path));//path是拍照成功得到图片路径
   			     var imgUrl=io.convertLocalFileSystemURL(path);//convertLocalFileSystemURL--可以把我们的相对路径
   			     //转换成相对于手机的绝对路径
   			     var img=document.createElement("img");
   			     img.style.width="200px";
   			     img.style.height="200px";
   			     img.style.borderRadius="4x";
   			     img.style.display="block";
   			     img.src=imgUrl;
   			     document.getElementById("img").appendChild(img);
   			     
   			},function(error){
   				alert("get image error&&"+error);
   			},{}
   			);//调用拍照方法 catptureImage(
   				//1.function(){success},
   				//2.function(){error},
   				//3.{可有可无});
   		}
   		//拍摄视频的方法
   		function pictureVideo(){
   			var _camera=plus.camera.getCamera();//1.获取摄像头管理对象
   			var _io=plus.io;//获取文件管理对象
   			_camera.startVideoCapture(
   				function(path){
   					alert("get video success&&"+path);
   					var videoUrl=_io.convertLocalFileSystemURL(path);
   					var _video=document.createElement('video');
   					_video.height="300px";
   					_video.width="360px";
   					_video.style.display="block";
   					_video.controls="controls";
   					_video.autoplay="autoplay";
   					_video.src=videoUrl;
   					document.getElementById("video").appendChild(_video);
   				},
   				function(error){alert("get video error"+error);},
   				{}
   			);//startVideoCapture(function(path){拍摄成功的文件路径},
   			//function(error){},
   			//{可为空})
   		}
   		//dcloud如何进行打包的操作
   		//1.web---准换成原生app项目
   		//2.选中项目----右键-----发行-----发行为原生安装包(项目里面一定要有index.html页面,项目中不能含义任何中文)
   		//3.打包选项----(填写很多参数)--(app启动图片,终端自适应图片,手机上面的权限参数,第三方sdk结合)
   		//4.云端打包 apk在手机中运行就可以了
    </script>
</head>
<body>
	<button onclick="pictureImg();">点击后拍照</button>
	<div id="img"></div>
	<button onclick="pictureVideo();">点击拍摄小视频</button>
	<div id="video">
		
	</div>
</body>
</html>